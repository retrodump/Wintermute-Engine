<html>

<head>
<meta http-equiv="Content-Language" content="cs">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<title>Krok 6: Volné entity, úrovnì zvìtšení a dekoraèní regiony</title>
<link rel="stylesheet" type="text/css" href="../styles.css">
</head>

<body>

<h3>Krok 6: Volné entity, úrovnì zvìtšení a dekoraèní regiony</h3>
<p>V této kapitole dokonèíme hrubı design naší scény. Otevøete soubor
&quot;MyScene.scene&quot; ve SceneEditu.</p>

<p>&nbsp;</p>

<h4><a name="free_entities"></a>Volné entity</h4>
<p>Podíváme-li se na naši scénu, idle se ještì nechová tak, jak by mìla.
Vypadá, jako by byla namalovaná na podlaze. Zkusme s tím nìco udìlat.&nbsp;
Toté u jsme uèinili se stolem v kapitolách 
<a href="inside_scenes_step2.html">krok 2</a> a <a href="inside_scenes_step3.html">krok
3</a>. Vytvoøili jsme entitu &quot;stùl&quot; a rozvrhli jsme regiony tak, e
stùl patøiènì pøekrıvá postavy, pokud se dostanou za nìj. Popsanı pøístup
pomocí regionù je velice flexibilní a je vhodnı zejména pro veliké objekty
a pro objekty s nepravidelnım pùdorysem. V pøípadì menších objektù je
vhodnìjší pøevést je na nìco, èemu øíkáme &quot;volné entity&quot;
(free entities). Ukáeme si to na pøíkladu idle.</p>

<p>Take co jsou &quot;volné entity&quot;? Døíve u jsme pouívali normální
entity; pozadí a stùl jsou entity, ale tyto entity jsou pevnì vázány na
rozvrení scény. Volné entity se v mnohém chovají jako postavy, jsou
vykreslovány v závislosti na tom, <b>kde</b> ve scénì jsou umístìny (jinımi
slovy, ve kterém regionu stojí). Takhle to mùe znít trochu zmatenì, ale
hned si ukáeme, jak to funguje.</p>

<p>Dobøe, vytvoøme entitu &quot;chair&quot; (idle). Nejprve potøebujeme prøipravit
grafiku, tedy obrázek idle. Toté u jsme dìlali s obrázkem pozadí a
obrázkem stolu. Pøepnìte se do programu ProjectMan, pravım tlaèítkem myši
kliknìte na sloce &quot;MyScene&quot; a vyberte pøíkaz
&quot;Import-&gt;Import file...&quot;&nbsp; (Import-&gt;Import souboru).
Nalistujte sloku &quot;data\tutorial\gfx&quot; a vyberte soubor
&quot;chair.bmp&quot;. Obrázek bude zkopírován do adresáøe s naší scénou.</p>

<p>Pøepnìte se zpátky do SceneEditu. Vlevo v seznamu vrstev zvolte poloku
&quot;Free entities&quot; (Volné entity). Spodní seznam prvkù scény se zmìnil
a nyní zobrazuje seznam všech volnıch entit (zatím je prázdnı). Kliknìte
na tlaèítko &quot;Add entity&quot; (Pøidat entitu) a v menu vyberte poloku
&quot;Add sprite entity&quot; (Pøidat sprite entitu). Bude vytvoøen objekt
&quot;new entity&quot;. Zmìòte jeho název na &quot;chair&quot; (idle). Také
mùete zmìnit vlatnost &quot;Caption&quot; (Titulek) na &quot;idle&quot;,
titulek pouijeme pozdìji.</p>

<p align="center">
<img border="0" src="../img/tut6-1.gif" width="222" height="190"></p>

<p align="center">&nbsp;</p>

<p>Nyní musíme nastavit obrázek, kterı reprezentuje naši novou netitu.
Kliknìte na tlaèítko &quot;...&quot; vedle vlastnosti &quot;Sprite&quot; a
najdìte soubor &quot;chair.bmp&quot;, kterı jsme pøed chvílí naimportovali.
Posuòte entitu tak, aby se pøesnì kryla s obrázkem idle na pozadí:</p>

<p align="center">
<img border="0" src="../img/tut6-2.gif" width="422" height="347"></p>

<p align="center">&nbsp;</p>

<p>Ulote scénu a spuste hru (v programu ProjectMan), abychom scénu vyzkoušeli.
A jéje, nìco je špatnì, postava pøekrıvá idli poøád. A co e se dìje?
Skuteènost je taková, e stojí-li více volnıch objektù (postav a entit)
ve stejném regionu, poøadí jejich vykreslení je dáno jejich Y souøadnicí
na obrazovce. Pozice postavy je daná bodem, kde se její nohy dotıkají zemì,
zatímco základní bod idle je v levém horním bodu obrázku. Urèitì byste
oèekávali, e idle by mìla mít základní bod také tam, kde se dotıká
zemì, nemám pravdu? Ale jak toho dosáhnout? Namísto jednoduchého BMP obrázku
pouijeme <b>sprite</b>. &quot;Sprite&quot; v pojetí WME je vlastnì sloenı
obrázek. Mùe to bıt jednoduchı obrázek èi animace a navíc lze definovat
nìkteré další vlastnosti (více informací o spritech). Jednou z techto dalších
vlastností je i takzvanı bázovı bod (hot spot). Pøesnì to potøebujeme,
abychm zmìnili bázovı bod naší idle.</p>

<p>Take nyní potøebujeme vytvoøit sprite pro idli. Pøepnìte se do
ProjectManu. Kliknìte pravım tlaèítkem myši na adresáøi
&quot;MyScene&quot; a v menu vyberte pøíkaz &quot;Add-&gt;Add sprite...&quot;
(Pøidat-&gt;Pøidat sprite). Objeví se okno s vıbìrem šablony. Zde vyberte
poloku &quot;Empty sprite&quot; (Prázdnı sprite). Pøepište jméno na
&quot;chair&quot; (idle) a stisknìte OK.</p>

<p align="center">
<img border="0" src="../img/tut6-3.gif" width="367" height="331"></p>

<p align="center">&nbsp;</p>

<p>Novı sprite bude vytvoøen v adresáøi &quot;MyScene&quot; a bude se
jmenovat &quot;chair.sprite&quot;. Pouijte double-click na novì vytvoøeném
souboru, èím se sprite otevøe v editaèním programu <b>SpriteEdit</b>. Zatím
je sprite prázdnı. Ve SpriteEditu mùete vytváøet animace, tím e poskládáte
nìkolik obrázku za sebe. Ale jeliko naše idle není animovaná, vystaèíme
s jedním obrázkem. Kliknìte na tlaèítko &quot;Add frame(s)&quot; (Pøidat
snímek/snímky) a potom najdìte a vyberte soubor &quot;chair.bmp&quot;.</p>

<p align="center">
<img border="0" src="../img/tut6-4.gif" width="218" height="184"></p>

<p align="center">&nbsp;</p>

<p>Nyní zmìníme onen bázovı bod (hot spot). Toho lze dosáhnout dvìma zpùsoby:
buïto pøetáhnìte obrázek myší, nebo vyplòte pozici bázového bodu v oknì
vlastností vlevo dole (bázovı bod je zobrazen jako malı èervenı køíek
vpravo v oknì náhledu spritu).</p>
<p>Zmìòte pozici bázového bodu na 135, 174.</p>

<p align="center">
<img border="0" src="../img/tut6-5.gif" width="219" height="210"></p>

<p align="center">
<img border="0" src="../img/tut6-6.gif" width="223" height="232"></p>

<p align="center">&nbsp;</p>

<p>Ulote sprite a zavøete SpriteEdit. Pøepnìte se zpátky do SceneEditu. V
oknì vlastností entity &quot;chair&quot; znovu kliknìte na tlaèítko
&quot;...&quot; vedle vlastnosti &quot;Sprite&quot; a tentokrát vyberte soubor
&quot;char.sprite&quot;, kterı jsme právì vytvoøili. Všimnìte si, e po
vybrání souboru idle poskoèila. To proto, jeliko se zmìnil její bázovı
bod. Znovu posuòte entitu idle tak, aby pøesnì pøekrıvala obrázek idle
na pozadí. No a je to! Ulote scénu a spuste hru.</p>
<p>Pøekrıvání teï u funguje tak, jak by mìlo. Je-li postava za idlí,
je pøekryta a naopak.</p>

<p align="center">
<img border="0" src="../img/tut6-7.gif" width="258" height="312">&nbsp;&nbsp;&nbsp;
<img border="0" src="../img/tut6-8.gif" width="258" height="312"></p>

<p align="center">&nbsp;</p>

<p>Teï u jen musíme zaøídit, aby postava nemohla procházet skrz idlo.
Docílíme toho pøidáním blokovaného regionu a hrsti navigaèních bodù.</p>

<p>Pøidejte novı blokovanı region (pojmenovanı &quot;block_chair&quot;) a ètyøi
navigaèní body. Jak to udìlat jsme se nauèili v kapitolách&nbsp; <a href="inside_scenes_step4.html">krok
4</a>
 a <a href="inside_scenes_step5.html">krok 5</a>. Mìli byste se dostat zhruba
na vısledek, zobrazenı na následujícím obrázku:</p>



<p align="center">
<img border="0" src="../img/tut6-9.gif" width="305" height="293"></p>



<p align="center">&nbsp;</p>



<h4><a name="scale_levels"></a>Úrovnì zvìtšení</h4>
<p>Rozvrení u funguje dobøe, ale postava se zdá bıt trochu moc malá vùèi
zbytku scény. Jak se postavy zvìtšují a zmenšují mùeme snadno ovlivnit
pomocí takzvanıch &quot;úrovní zvìtšení&quot; (scale levels). Úrovnì zvìtšení
jsou reprezentovány tìmi vodorovnımi zelenımi èarami ve SceneEditu, kterıch
jste si urèitì u všimli. Myšlenka je následující: zadefinujete úroveò
zvìtšení postavy v urèitıch klíèovıch bodech scény a herní engine pak
automaticky dopoèítá správné zvìtšení podle aktuální Y pozice postavy.</p>
<p>V naší scénì u jsou pøeddefinovány dvì úrovnì zvìtšení (a zøídka
budete potøebovat více ne dvì). Zelenımi èarami mùete pohybovat myší,
pokud je chytnete za drátko vlevo. Odstranit úroveò zvìtšení a nastavit
její vlastnosti mùete, pokud na drátku kliknete pravım tlaèítkem myši.</p>

<p align="center">
<img border="0" src="../img/tut6-10.gif" width="173" height="149"></p>

<p align="center">&nbsp;</p>

<p>Pokud potøebujete do scény pøidat další úroveò zvìtšení, pouijte
tlaèítko &quot;Add scale level&quot; (Pøidat úroveò zvìtšení).</p>


<p align="center">
<img border="0" src="../img/tut6-11.gif" width="173" height="153"></p>


<p align="center">&nbsp;</p>


<p>Ale dosti teorie, nastavme úrovnì zvìtšení v naší scénì. Posuòte
horní zelenou èáru tak, aby se zhruba dotıkala horního bodu podlahy. Pøes
pravé tlaèítko nastavte zvìtšení na 90%.</p>
<p>Potom posuòte spodní zelenou èáru k dolnímu okraji podlahy a nastavte zvìtšení
na 160%.</p>


<p align="center">
<img border="0" src="../img/tut6-12.gif" width="613" height="402"></p>


<p align="center">&nbsp;</p>


<p><a name="actor_placement"></a>Moná si øíkáte, jak odhadnout správné
zvìtšení v tìchto dvou bodech. Inu, nejlepší zpùsob je pouít <b>nástroj
pro umístìní postavy</b>. SceneEdit vám umoòuje umístit do scény
postavu, a tak okamitì otestovat, jak funguje rozvrení scény a úrovnì
zvìtšení. To znamená, e vùbec nemusíte spouštìt hru, abyste otetovali
vısledek vašeho snaení ve SceneEditu! Pøíkaz &quot;Place actor&quot; (Umístit
postavu) naleznete na panelu nástrojù nebo nahoøe v hlavním menu jako
&quot;Actor-&gt;Place actor&quot; (Postava-&gt;Umístit postavu).</p>


<p align="center">
<img border="0" src="../img/tut6-13.gif" width="178" height="109"></p>


<p align="center">&nbsp;</p>

<p>Stisknìte toto tlaèítko a SceneEdit vás nechá vyprat soubor s postavou.
Nalistujte adresáø &quot;data\actors\molly&quot; a vyberte soubor
&quot;molly.actor&quot;. Jakmile bude postava nahrána do scény, pohybem myší
mùete postavu umístit na jakékoliv místo. Stisknutím pravého tlaèítka
myši lze nastavit, do jakého smìru je postava natoèena. Stisknutím levého
tlaèítka myši se postava umístí do scény. Pokud potøebujete pozdìji zmìnit
její pozici, prostì opìt stisknìte tlaèítko &quot;Place actor&quot; (Umístit
postavu).</p>

<p>Poznámka: nástroj pro umístìní postavy slouí pouze pro potøeby návrhu
scény; vlastní scénu nijak neovlivòuje</p>

<p>Pokusnım umístìním postavy na rùzná místa scény mùete snadno
vyladit to správné procento zvìtšení pro jednotlivé úrovnì zvìtšení.</p>


<p>&nbsp;</p>


<h4><a name="decoration_regions"></a>Dekoraèní regiony</h4>
<p>Jeliko je rozvrení scény u hotové, pøidáme nìjakou tu ozdobu. Øeknìme
e chceme, aby se postava jevila trochu tmavší, pokud stojí v odlehlém koutì
scény.</p>
<p>Mùeme do scény pøidat speciální regiony, které ovlivòují barevnost
a zvìtšení postav. Øíká se jim &quot;dekoraèní regiony&quot; (pamatujte,
u známe dva další typy regionù: 
<a href="inside_scenes_step3.html">regiony rozvrení</a> a 
<a href="inside_scenes_step4.html">blokované regiony</a>).</p>
<p>Dekoraèní regiony pøidáváme úplnì stejnì, jako ostatní typy:
stisknutím tlaèítka &quot;Add region&quot; (Pøidat region). Ne tlaèítko
stisknete, ujistìte se, e máte v seznamu vrstev vybránu poloku
&quot;main&quot;.</p>

<p align="center">
<img border="0" src="../img/tut6-14.gif" width="133" height="92"></p>

<p align="center">&nbsp;</p>

<p>Stisknìte tlaèítko a do scény bude vloen novı region. Zmìòte jeho jméno
na &quot;shade&quot; (stín) a poté pøepnìte rádové tlaèítko z polohy
&quot;Layout&quot; (rozvrení) do polohy &quot;Decoration&quot; (dekoraèní).
V oknì s vlastnostmi si nyní povšimnìte vıbìrového pole &quot;Color&quot;
(barva). Jak jistì tušíte, pomocí nìj lze zvolit barvu daného regionu.
Pokud do regionu vstoupí postava, její pùvodní barva bude zkombinována s
barvou regionu. Zmìòte barvu na svìtle šedou.</p>


<p align="center">
<img border="0" src="../img/tut6-15.gif" width="221" height="173"></p>


<p align="center">&nbsp;</p>


<p>Poznámka: Také byste mohli zmìnit zvìtšení pro tento region (Scale).
Tato volba pak pro danı region potlaèí vıchozí velikost, nastavenou pomocí
úrovní zvìtšení (viz pøedchozí podkapitola).</p>

<p>Poznámka: obarvování postav funguje pouze pokud:</p>
<blockquote>
1)&nbsp;&nbsp;&nbsp;hra bìí v akcelerovaném reimu; v reimu
kompatibility je obarvování vypnuto<br>
2)&nbsp;&nbsp;&nbsp;obarvovanı objekt musí mít vlastnost Colorable
(obarvitelné) nastavenou na true (pravda)
<p>&nbsp;</p>

</blockquote>

<p>Nyní pøesuòte region na správnou pozici a zmìòte jeho tvar tak jako na
obrázku:</p>


<p align="center">
<img border="0" src="../img/tut6-16.gif" width="545" height="231"></p>


<p align="center">&nbsp;</p>


<p>Poznámka: Dekoraèní regiony neovlivòují rozvrení scény. Nicménì
obarvení postavy se øídí podle <u>nejvrchnìjšího</u> regionu, kterı
postava najde, proto by dekoraèní regiony mìly bıt umístìny a na konci
seznamu prvkù ve SceneEditu.</p>

<p>Vısledky nastavení mùete otestovat pøímo ve SceneEditu pomocí <a href="#actor_placement">nástroje
pro umístìní postavy</a>, kterı je popsán vıše.</p>

<p>Ulote scénu a ukonèete SceneEdit. Nyní mùete spustit hru a otestovat
všechny zmìny, které jsme v této kapitole provedli. Postava by mìla mít
správnou velikost, obcházet idli, a pokud dojde do odlehlého rohu scény,
tak lehce ztmavne.</p>

<p>Naše scéna u teï dobøe vypadá, take mùeme pøidat nìjakou tu
interaktivitu v kapitole <a href="inside_scenes_step7.html">Krok 7: Regionové
entity, kurzory, skripty</a>.</p>

</body>

</html>